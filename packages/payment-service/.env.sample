# ================================
# CORE CONFIGURATION
# ================================
NODE_ENV=production
PORT=4001
MIGRATE_ON_STARTUP=false

# ================================
# SECURITY & AUTHENTICATION
# ================================
# Inter-service authentication (MUST match upload-service .env)
PRIVATE_ROUTE_SECRET=

# JWT secret for token generation
JWT_SECRET=

# ================================
# DATABASE CONFIGURATION
# ================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=turbo_admin
DB_PASSWORD=postgres
DB_DATABASE=payment_service
DB_WRITER_ENDPOINT=localhost
DB_READER_ENDPOINT=localhost

# ================================
# ARWEAVE CONFIGURATION
# ================================
# Arweave gateway for pricing and transactions
ARWEAVE_GATEWAY=http://localhost:3000

# Arweave wallet addresses (must match your wallet.json)
ARWEAVE_ADDRESS=
ARIO_ADDRESS=

# ================================
# X402 PAYMENT PROTOCOL (Primary)
# ================================
# Enable/disable x402 payments (default: true)
X402_ENABLED=true

# Your receiving wallet address (REQUIRED if x402 enabled)
X402_PAYMENT_ADDRESS=

# ---- Coinbase CDP Credentials (REQUIRED for MAINNET) ----
# Get credentials from: https://portal.cdp.coinbase.com/
# NOT required for testnet (use public facilitator)
CDP_API_KEY_ID=
CDP_API_KEY_SECRET=

# ---- Browser Paywall Integration (OPTIONAL) ----
# CDP Client Key enables browser-based payment UI with Coinbase Onramp
# This is the PUBLIC client key (safe for browser/client-side use)
# Get from: https://portal.cdp.coinbase.com/
# Benefits:
#   - Users can buy USDC directly in the payment flow
#   - Better UX for non-technical users
#   - Falls back to standard x402 JSON if not provided
# Leave empty for API-only usage (no browser paywall)
X_402_CDP_CLIENT_KEY=

# ---- Network Configuration ----
# Base Mainnet (Primary - USDC on Base)
X402_BASE_ENABLED=true
BASE_MAINNET_RPC_URL=https://mainnet.base.org
X402_BASE_MIN_CONFIRMATIONS=1
X402_FACILITATOR_URL_BASE=https://facilitator.base.coinbasecloud.net

# Ethereum Mainnet (Optional)
X402_ETH_ENABLED=false
ETHEREUM_MAINNET_RPC_URL=https://cloudflare-eth.com/
X402_ETH_MIN_CONFIRMATIONS=3
X402_FACILITATOR_URL_ETH=https://facilitator.ethereum.coinbasecloud.net

# Polygon Mainnet (Optional)
X402_POLYGON_ENABLED=false
POLYGON_MAINNET_RPC_URL=https://polygon-rpc.com/
X402_POLYGON_MIN_CONFIRMATIONS=10
X402_FACILITATOR_URL_POLYGON=https://facilitator.polygon.coinbasecloud.net

# Base Sepolia Testnet (For Development)
X402_BASE_TESTNET_ENABLED=false
BASE_SEPOLIA_RPC_URL=https://sepolia.base.org
X402_FACILITATOR_URL_BASE_TESTNET=https://x402.org/facilitator

# ---- Payment Configuration ----
# Payment mode: payg, topup, or hybrid (default)
X402_DEFAULT_MODE=hybrid

# Payment timeout (5 minutes default)
X402_PAYMENT_TIMEOUT_MS=300000

# Price buffer for volatility (15% default)
X402_PRICING_BUFFER_PERCENT=15

# Fraud detection tolerance (5% default)
X402_FRAUD_TOLERANCE_PERCENT=5

# ---- CoinGecko API (for AR/USD pricing) ----
# Optional - uses free tier if not set
COINGECKO_API_KEY=

# ================================
# CRYPTOCURRENCY PAYMENTS (Secondary)
# ================================
# Enable crypto payment monitoring
CRYPTO_MONITORING_ENABLED=false

# Gateway URLs for different blockchains
ETHEREUM_GATEWAY=https://cloudflare-eth.com/
MATIC_GATEWAY=https://polygon-rpc.com/
SOLANA_GATEWAY=https://api.mainnet-beta.solana.com/
KYVE_GATEWAY=https://api.kyve.network/
BASE_ETH_GATEWAY=https://mainnet.base.org

# Exclude addresses from crypto fund monitoring
CRYPTO_FUND_EXCLUDED_ADDRESSES=

# ================================
# STRIPE PAYMENTS (Optional)
# ================================
# Enable Stripe credit card payments
STRIPE_ENABLED=false

# Stripe API credentials
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# Payment quote expiration (30 minutes default)
TOP_UP_QUOTE_EXPIRATION_MS=1800000

# ================================
# ARNS (Arweave Name System) (Optional)
# ================================
# Enable ArNS purchases
ARNS_ENABLED=false

# ================================
# GIFTING (Optional)
# ================================
# Enable gifting via email
GIFTING_ENABLED=false
GIFTING_EMAIL_ADDRESS=gift@ardrive.io
MAX_GIFT_MESSAGE_LENGTH=250

# ================================
# REDIS CACHE (Optional)
# ================================
REDIS_CACHE_HOST=localhost
REDIS_CACHE_PORT=6379

# ================================
# EMAIL NOTIFICATIONS (Optional)
# ================================
# SendGrid for email notifications
SENDGRID_API_KEY=

# ================================
# MONITORING & OBSERVABILITY (Optional)
# ================================
# OpenTelemetry tracing
OTEL_ENABLED=false
OTEL_COLLECTOR_URL=

# Prometheus metrics
PROMETHEUS_PORT=9090

# ================================
# RATE LIMITING (Optional)
# ================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# ================================
# QUICKSTART CONFIGURATION EXAMPLES
# ================================

# ---- Example 1: x402-Only (Minimal) ----
# X402_ENABLED=true
# X402_PAYMENT_ADDRESS=0xYourAddress
# CDP_API_KEY_ID=your-key-id
# CDP_API_KEY_SECRET=your-key-secret
# STRIPE_ENABLED=false
# CRYPTO_MONITORING_ENABLED=false

# ---- Example 2: x402 Testnet (Development) ----
# X402_BASE_TESTNET_ENABLED=true
# X402_FACILITATOR_URL_BASE_TESTNET=https://x402.org/facilitator
# X402_PAYMENT_ADDRESS=0xYourTestAddress
# (No CDP credentials needed for testnet)

# ---- Example 3: Full-Featured (All Payment Methods) ----
# X402_ENABLED=true
# STRIPE_ENABLED=true
# CRYPTO_MONITORING_ENABLED=true
# ARNS_ENABLED=true
# GIFTING_ENABLED=true
